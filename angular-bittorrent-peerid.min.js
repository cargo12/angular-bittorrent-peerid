"use strict";angular.module("angularBittorrentPeerid",[]),angular.module("angularBittorrentPeerid").run(function(){"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return this.slice(-a.length)===a}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a,b){return b=b||0,this.slice(b,b+a.length)===a})}),angular.module("angularBittorrentPeerid").factory("peeridUtils",function(){function a(a){var b=a.charCodeAt(0);return b>="0".charCodeAt(0)&&b<="9".charCodeAt(0)}function b(a){var b=a.toLowerCase().charCodeAt(0);return b>="a".charCodeAt(0)&&b<="z".charCodeAt(0)}function c(c){return a(c)||b(c)||"."===c}function d(a,b){b=b||0;for(var c=""+(255&a);c.length<b;)c="0"+c;return c}return{getUtf8Data:function(a){var c,d,b=[];for(c=0;c<a.length;c++)d=a.charCodeAt(c),128>d?b.push(d):2048>d?b.push(192|d>>6,128|63&d):b.push(224|d>>12,128|63&d>>6,128|63&d);return b},isAzStyle:function(a){return"-"!==a.charAt(0)?!1:"-"===a.charAt(7)?!0:"FG"===a.substring(1,3)?!0:"LH"===a.substring(1,3)?!0:"NE"===a.substring(1,3)?!0:"KT"===a.substring(1,3)?!0:"SP"===a.substring(1,3)?!0:!1},isShadowStyle:function(d){var e,f,g;if("-"!==d.charAt(5))return!1;if(!b(d.charAt(0)))return!1;if(!a(d.charAt(1))&&"-"!==d.charAt(1))return!1;for(e=4;e>0&&"-"===d.charAt(e);e--);for(f=1;e>=f;f++){if(g=d.charAt(f),"-"===g)return!1;if(null===c(g))return!1}return!0},isMainlineStyle:function(a){return"-"===a.charAt(2)&&"-"===a.charAt(7)&&("-"===a.charAt(4)||"-"===a.charAt(5))},isPossibleSpoofClient:function(a){return a.endsWith("UDP0")||a.endsWith("HTTPBT")},decodeNumericValueOfByte:d,getAzStyleVersionNumber:function(a,b){return"function"==typeof b?b(a):null},getShadowStyleVersionNumber:function(){return null},decodeBitSpiritClient:function(a,b){if("BS"!==a.substring(2,4))return null;var c=""+b[1];return"0"===c&&(c=1),{client:"BitSpirit",version:c}},decodeBitCometClient:function(a,b){var e,f,g,h,c="";if(a.startsWith("exbc"))c="";else if(a.startsWith("FUTB"))c="(Solidox Mod)";else{if(!a.startsWith("xUTB"))return null;c="(Mod 2)"}return e="LORD"===a.substring(6,10),f=e?"BitLord":"BitComet",g=d(b[4]),h=e&&"0"!==g?1:2,{client:f+(c?" "+c:""),version:g+"."+d(b[5],h)}},identifyAwkwardClient:function(a,b){var d,e,c=20;for(d=0;20>d;++d)if(b[d]>0){c=d;break}if(0===c){for(e=!0,d=0;16>d;++d)if(0===b[d]){e=!1;break}if(e){for(d=16;20>d;++d)if(b[d]!==(b[d%16]^b[15-d%16])){e=!1;break}if(e)return{client:"Shareaza"}}}return 9===c&&3===b[9]&&3===b[10]&&3===b[11]?{client:"I2PSnark"}:12===c&&97===b[12]&&97===b[13]?{client:"Experimental",version:"3.2.1b2"}:12===c&&0===b[12]&&0===b[13]?{client:"Experimental",version:"3.1"}:12===c?{client:"Mainline"}:null}}}),angular.module("angularBittorrentPeerid").provider("bittorrentPeeridService",function(){var a="unknown",b="fake",c={},d={},e={},f={},g={},h=[],i=function(a){return a[0]+"."+a[1]+"."+a[2]},j=function(a){var b="ABCDE";return isNaN(a[2])?a[0]+"."+a[1]+".1"+b.indexOf(a[2]):a[0]+"."+a[1]+"."+a[2]},k=function(a){var b=a[3];return b="B"==b?"Beta":"A"==b?"Alpha":"",a[0]+"."+a[1]+"."+a[2]+" "+b},l=function(a){return a[0]+"."+a[1]+"."+a[2]+"."+a[3]},m=function(a){return a[0]+a[1]+"."+a[2]+a[3]},n=function(a){return a[1]+"."+a[2]+a[3]},o="1.2.3=[RD].4",p=function(a){return"0"==a[0]&&"0"==a[1]&&"0"==a[2]?"0."+a[3]:"0"==a[0]&&"0"==a[1]?"0."+a[2]+a[3]:a[0]+"."+a[1]+a[2]+("Z"==a[3]||"X"==a[3]?"+":"")},q=function(a){var b="";return b+="0"==a[0]?a[1]+".":""+a[0]+a[1]+".",b+="0"==a[2]?a[3]:""+a[2]+a[3]},r="2.33.4",s="NO_VERSION",t=this.addAzStyle=function(a,b,e){e=e||l,c[a]=b,d[b]=e},u=this.addShadowStyle=function(a,b,c){c=c||i,e[a]=b,f[b]=c},v=this.addMainlineStyle=function(a,b){g[a]=b},w=this.addSimpleClient=function(a,b,c,d){("number"==typeof c||"undefined"==typeof c)&&(d=c,c=b,b=void 0),h.push({id:c,client:a,version:b,position:d||0})};!function(){t("A~","Ares",i),t("AG","Ares",i),t("AN","Ares",l),t("AR","Ares"),t("AV","Avicora"),t("AX","BitPump",m),t("AT","Artemis"),t("AZ","Vuze",l),t("BB","BitBuddy","1.234"),t("BC","BitComet",n),t("BE","BitTorrent SDK"),t("BF","BitFlu",s),t("BG","BTG",l),t("bk","BitKitten (libtorrent)"),t("BR","BitRocket","1.2(34)"),t("BS","BTSlave"),t("BT","BitTorrent",k),t("BW","BitWombat"),t("BX","BittorrentX"),t("CB","Shareaza Plus"),t("CD","Enhanced CTorrent",m),t("CT","CTorrent","1.2.34"),t("DP","Propogate Data Client"),t("DE","Deluge",j),t("EB","EBit"),t("ES","Electric Sheep",i),t("FC","FileCroc"),t("FG","FlashGet",n),t("FT","FoxTorrent/RedSwoosh"),t("GR","GetRight","1.2"),t("GS","GSTorrent"),t("HL","Halite",i),t("HN","Hydranode"),t("KG","KGet"),t("KT","KTorrent",o),t("LC","LeechCraft"),t("LH","LH-ABC"),t("LK","linkage",i),t("LP","Lphant",m),t("LT","libtorrent (Rasterbar)",r),t("lt","libTorrent (Rakshasa)",r),t("LW","LimeWire",s),t("MO","MonoTorrent"),t("MP","MooPolice",i),t("MR","Miro"),t("MT","MoonlightTorrent"),t("NE","BT Next Evolution",i),t("NX","Net Transport"),t("OS","OneSwarm",l),t("OT","OmegaTorrent"),t("PC","CacheLogic","12.3-4"),t("PT","Popcorn Time"),t("PD","Pando"),t("PE","PeerProject"),t("pX","pHoeniX"),t("qB","qBittorrent",j),t("QD","qqdownload"),t("RT","Retriever"),t("RZ","RezTorrent"),t("S~","Shareaza alpha/beta"),t("SB","SwiftBit"),t("SD","迅雷在线 (Xunlei)"),t("SG","GS Torrent",l),t("SN","ShareNET"),t("SP","BitSpirit",i),t("SS","SwarmScope"),t("ST","SymTorrent","2.34"),t("st","SharkTorrent"),t("SZ","Shareaza"),t("TN","Torrent.NET"),t("TR","Transmission",p),t("TS","TorrentStorm"),t("TT","TuoTu",i),t("UL","uLeecher!"),t("UE","µTorrent Embedded",k),t("UT","µTorrent",k),t("UM","µTorrent Mac",k),t("WD","WebTorrent Desktop",q),t("WT","Bitlet"),t("WW","WebTorrent",q),t("WY","FireTorrent"),t("VG","哇嘎 (Vagaa)",l),t("XL","迅雷在线 (Xunlei)"),t("XT","XanTorrent"),t("XF","Xfplay",p),t("XX","XTorrent","1.2.34"),t("XC","XTorrent","1.2.34"),t("ZT","ZipTorrent"),t("7T","aTorrent"),t("ZO","Zona",l),t("#@","Invalid PeerID"),u("A","ABC"),u("O","Osprey Permaseed"),u("Q","BTQueue"),u("R","Tribler"),u("S","Shad0w"),u("T","BitTornado"),u("U","UPnP NAT"),v("M","Mainline"),v("Q","Queen Bee"),w("µTorrent","1.7.0 RC","-UT170-"),w("Azureus","1","Azureus"),w("Azureus","2.0.3.2","Azureus",5),w("Aria","2","-aria2-"),w("BitTorrent Plus!","II","PRC.P---"),w("BitTorrent Plus!","P87.P---"),w("BitTorrent Plus!","S587Plus"),w("BitTyrant (Azureus Mod)","AZ2500BT"),w("Blizzard Downloader","BLZ"),w("BTGetit","BG",10),w("BTugaXP","btuga"),w("BTugaXP","BTuga",5),w("BTugaXP","oernu"),w("Deadman Walking","BTDWV-"),w("Deadman","Deadman Walking-"),w("External Webseed","Ext"),w("G3 Torrent","-G3"),w("GreedBT","2.7.1","271-"),w("Hurricane Electric","arclight"),w("HTTP Seed","-WS"),w("JVtorrent","10-------"),w("Limewire","LIME"),w("Martini Man","martini"),w("Pando","Pando"),w("PeerApp","PEERAPP"),w("SimpleBT","btfans",4),w("Swarmy","a00---0"),w("Swarmy","a02---0"),w("Teeweety","T00---0"),w("TorrentTopia","346-"),w("XanTorrent","DansClient"),w("MediaGet","-MG1"),w("MediaGet","2.1","-MG21"),w("Amazon AWS S3","S3-"),w("BitTorrent DNA","DNA"),w("Opera","OP"),w("Opera","O"),w("Burst!","Mbrst"),w("TurboBT","turbobt"),w("BT Protocol Daemon","btpd"),w("Plus!","Plus"),w("XBT","XBT"),w("BitsOnWheels","-BOW"),w("eXeem","eX"),w("MLdonkey","-ML"),w("Bitlet","BitLet"),w("AllPeers","AP"),w("BTuga Revolution","BTM"),w("Rufus","RS",2),w("BitMagnet","BM",2),w("QVOD","QVOD"),w("Top-BT","TB"),w("Tixati","TIX"),w("folx","-FL"),w("µTorrent Mac","-UM"),w("µTorrent","-UT")}(),this.$get=["peeridUtils",function(f){var i=function(a){return c[a.substring(1,3)]},j=function(a){return e[a.substring(0,1)]},k=function(a){return g[a.substring(0,1)]},l=function(a){var b,c;for(b=0;b<h.length;++b)if(c=h[b],a.startsWith(c.id,c.position))return c;return null},m=function(a,b){var c=d[a];return c?f.getAzStyleVersionNumber(b.substring(3,7),c):null},n=function(c){var d=f.getUtf8Data(c),e=null,g=null,h=null;return f.isPossibleSpoofClient(c)?(e=f.decodeBitSpiritClient(c,d))?e:(e=f.decodeBitCometClient(c,d))?e:{client:"BitSpirit?"}:f.isAzStyle(c)&&(e=i(c))?(g=m(e,c),e.startsWith("ZipTorrent")&&c.startsWith("bLAde",8)?{client:a+" ["+b+": "+name+"]",version:g}:"µTorrent"===e&&"6.0 Beta"===g?{client:"Mainline",version:"6.0 Beta"}:e.startsWith("libTorrent (Rakshasa)")?{client:e+" / rTorrent*",version:g}:{client:e,version:g}):f.isShadowStyle(c)&&(e=j(c))?{client:e}:f.isMainlineStyle(c)&&(e=k(c))?{client:e}:(e=f.decodeBitSpiritClient(c,d))?e:(e=f.decodeBitCometClient(c,d))?e:(h=l(c))?(e=h.client,{client:e,version:h.version}):(e=f.identifyAwkwardClient(c,d))?e:{client:"unknown"}};return{parseClient:n}}]});